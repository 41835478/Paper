






















	

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "//www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="//www.w3.org/1999/xhtml">
<head>

<!-- for qq weibo webapp 验证 -->
<meta property="qc:admins" content="22343077776611337636" />
<meta property="wb:webmaster" content="7d3e25852da2f717" />


<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="renderer" content="webkit" />
<meta name="keywords" content="凡科 商务平台 登录 自助建站 一站式企业服务">
<meta name="description" content="凡科提供企业邮箱、自助建站系统等多样化服务，努力打造成为最全面的服务平台。电脑网站、手机网站和微信网站三合一，助力企业营销，促进企业发展。">
<meta name="author" content="凡科互联网科技股份有限公司">
<meta name="copyright" content="凡科互联网科技股份有限公司版权所有">
<meta name="baidu-site-verification" content="1Ejrws2kq6" />
<title>凡科网登录</title>
<link href="//ps.faisys.com/css/index.min.css?v=201806191627" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="//ps.faisys.com/js/comm/jquery/jquery-core.min.js?v=201707031158"></script>
<script type="text/javascript">  
(function() { 
var fs = document.createElement("script"); 
fs.src = "//fe.faisys.com/jssdk_1_0/js/hawkEye.min.js?v=201806251721";
window.FAI_HAWK_EYE = {}; 
window.FAI_HAWK_EYE.jssdk_report_url = "//report.fkw.com/js/report"; 
window.FAI_HAWK_EYE.jssdk_appid = 2000; 
window.FAI_HAWK_EYE.fai_aid = 0; 
window.FAI_HAWK_EYE.fai_bs_aid = 0; 
window.FAI_HAWK_EYE.fai_bs_id = 0; 
window.FAI_HAWK_EYE.fai_bs_wid = 0; 
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(fs, s);
})();</script>
<!---->
<script type="text/javascript" src="//ps.faisys.com/js/comm/fai.min.js?v=201807021405"></script>
<script type="text/javascript" src="//ps.faisys.com/js/util.min.js?v=201807091413"></script>

	<script type="text/javascript" src="//ps.faisys.com/js/faiEncrypt.min.js?v=201707031158"></script>
	
	    <script type="text/javascript" src="//ps.faisys.com/js/faiEncrypt1.min.js?v=201707031158"></script>
	

</head>

<body style="background-color:#f0f6fe; font-family:'微软雅黑';">
<div class="container">

	<!-- ## START header ## -->
	<div style="background-color:#fff;">
	<div class="header">
		
			
				<div class="left" style="padding-left:0px;background: url(//ps.faisys.com/image/index/fkw_logo.png?v=201801111059) 0 23px no-repeat;">
					<a hidefocus="true" class="logo" href="http://www.fkw.com" target="_blank"></a>
					<div class="text"></div>
				</div>
			
			
		

		<div class="header_link">
			<a href="http://www.fkw.com/reg.html" target="_blank">免费注册</a>			
			<span class="sep">&nbsp;</span>
			<a href="//www.fkw.com/alliance.html" target="_blank" onclick="Portal.logDog(4000023, 433)">招商加盟</a>
			
		</div>

		<div class="clear"></div>
	</div>
	</div>
	<!-- ## END header ## -->

	<!-- ## START middle ## -->
	<div class="middle">
		<div class="content">
			<!-- ## START middle left ## -->
			<div class="left">
				<!--<div class="text">
					一站式解决自助建站、企业邮箱、互动营销需求<br>
					现在就&nbsp;<a hidefocus="true" href="//jz.fkw.com/reg.html" target="_blank">免费注册</a>&nbsp;体验更多精彩
				</div>-->
				<a id="reg-button" class="regBtn"></a>
			</div>
			<!-- ## END middle left ## -->
	
			<!-- ## START middle right ## -->
			<div class="right">
				<div class="loginBody">
					<div class="righttop">
						<div class="loginTab pwdLoginTab checkLoginTab" _loginMode="pwdLogin">密码登录</div>
						<div class="loginTab codeLoginTab" _loginMode="codeLogin">短信码登录</div>
					</div>
					<div id="log-form" class="rightmid">
						<div class="pwdLoginPanel loginPanel">
							<div class="log-input-container">
								<div class="clear" style="font-size:0px;"></div>
								<div class="log-line" id="rowCacct">
									<div class="log-txt">凡科网帐号/邮箱/手机号码</div>
									<input id="log-cacct" type="text" autocomplete="off" maxlength="34" class="log-input input2" />
									<div class="logIcoNew logIcoCacct">&nbsp;</div>
								</div>
								<div class="log-line" id="rowSacct" style="display:none;">
									<div class="log-txt">员工帐号</div>
									<input id="log-sacct" type="text" autocomplete="off" maxlength="20" class="log-input input2" />
									<div class="logIcoNew logIcoSacct">&nbsp;</div>
								</div>
								<div class="log-line" id="rowPwd">
									<div id="passwordLabel" class="log-txt">密码</div>
									<input id="log-pwd" type="password" autocomplete="new-password" maxlength="20" class="log-input input2" />
									<input id='showPwd' type='txt' autocomplete='new-password' maxlength='20' class='log-input input2' />
									<div id='showPassword' class='log-showPwd loginWindowImg' _show='true'></div>
									<div class="logIcoNew logIcoPwd">&nbsp;</div>
								</div>
								<div id="log-valid-line" class="log-line" style="display:none;">
									<div class="log-txt" style="width:116px; left:12px;">验证码</div>
									<input id="log-valid" type="text" class="log-input input2" style="width:116px; padding-left:12px;" />
									<img id="log-valid-img" title="看不清？点击换一张" />
									<span id="log-refresh-btn" title="看不清？点击换一张"></span>
								</div>
							</div>
							<div class="goin1"><a href="javascript:;" onClick="openPassword();">忘记密码？</a></div>
							<div class="option" id="staff-login-option">
								<div class="goin"><input id="staff-login" class="checkBox" type="checkbox" onclick="useSacct();"/><label class="checkItemLabel"></label><label for="staff-login">使用员工帐号登录</label></div>
							</div>
							<div class="option">
								<div class="goin"><input id="auto-login" class="checkBox" type="checkbox"/><label class="checkItemLabel"></label><label for="auto-login">两周内自动登录</label></div>
							</div>
						</div>
						<div class="codeLoginPanel loginPanel">
							<div class="log-line" id="mobile">
								<div class="log-txt">手机号码</div>
								<input id="log-mobile" type="text" autocomplete="off" maxlength="34" class="log-input input2" />
								<div class="logIcoNew logIcoMobile">&nbsp;</div>
							</div>
							<div class="log-line" id="mobileCode" style="width: 157px;">
								<div class="log-txt">短信码</div>
								<input id="log-mobileCode" style="width: 95px;" type="text" autocomplete="off" maxlength="6" class="log-input input2" />
								<div class="logIcoNew logIcoMobileCode">&nbsp;</div>
							</div>
							<div class="mobileCodeBtn" disabled="disabled">获取短信码</div>
							<div style="clear:both"></div>
							<div id="codeLogin-valid-line" class="log-line" style="display:none;">
								<div class="log-txt" style="width:116px; left:12px;">验证码</div>
								<input id="codeLogin-valid" type="text" class="log-input input2" style="width:116px; padding-left:12px;" />
								<img id="codeLogin-valid-img" title="看不清？点击换一张" />
								<span id="codeLogin-refresh-btn" title="看不清？点击换一张"></span>
							</div>
						</div>
						<div id="error" class="worn"></div>
						<div id="login-button" class="loginBtn">登&nbsp;&nbsp;录</div>
						<div class="clear"></div>
					</div>
					
				</div>
				
				<div class="login_otherAcct">
					<span class="login_other">其他帐号登录</span>
					<a class="login_WeChatI" href="javascript:;" onclick="bindWeChat();" title="微信登录"></a>
					<a class="login_QQI" href="javascript:;" onclick="bindQQAccount();" title="QQ登录"></a>
					<a class="registerHref" href="http://www.fkw.com/reg.html" onclick="Portal.logDog(4000118, 8);">立即注册</a>
				</div>
				
			</div>
			<!-- ## END middle right ## -->
	
			<!--<div class="clear"></div>-->
			
			<div class="foot">
				<div class="graw">Copyright <font style="font-family:"微软雅黑', '黑体', '新宋体', 'Arial Unicode MS'">&copy; </font> 2010-2018 广州凡科互联网科技股份有限公司<br>
				<div style="padding:5px 0 10px 0;">
				
					<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44010502000715" style="display:inline-block;text-decoration:none;height:20px;line-height:20px; margin-right:5px;"><img src="//ps.faisys.com/image/beianIcon.png" width="20" height="20"<p style="float:left;height:20px;line-height:20px;margin: 0px 5px 0px 0px; color:#898989;">粤公网安备 44010502000715号</p></a>
				
					<a href="http://www.miitbeian.gov.cn/" target='_blank' rel="nofollow">粤ICP备10235580号</a>
				</div>
				</div>
			</div>
		</div>
	</div>
	<!-- ## END middle ## -->
	<!-- </div> -->
</div>
<script type="text/x-template" id="t-imgVerify">
	<div class="m-imgVerify">
		<span class="close"></span>
		<div class="title">请先完成下方验证</div>
		<div class="inputLine">
			<input type="text" maxlength="4" class="codeVal" placeholder="请输入右侧验证码"><!--
			--><img class="codeImg">
			<span class="refreshBtn">换一张</span>
		</div>
		<div class="msg"></div>
		<button class="u-bigBtn confirmBtn">确定</button>
	</div>
</script>
<script type="text/javascript">

var faiEncrypt_key = "MIGfMA0GCSqGSxx3DQEBAQUAA4GNADCBiQKBgQCBWNoG5LJ3u44Gs8PWs1MaNUQQ+mOmh+9zWdzSt3ORbmfCDvU+ssW/6QTTgXvWWx7+Wzq/a4fCCQp72zSqXeVhWkTVct9Hyp/iMo5K6qOEK76z9z+tP/u99X6qazeXGVMWKkPiyZT4mKAGd/U8Mph9Z1Z5kOluA7g7heq8PPlE9wIDAQAB";


function isMobile(mobile){
	var pattern = /^1[3456789]\d{9}$/;
	return pattern.test(mobile);
}
var cacct = "";
var sacct = "";

	$(function(){

		login.initEvent();

		var logAcct = $('#log-cacct'), logAcctVal;
		//从url/cookie中获取用户名
		if (cacct.length > 0) {
			logAcctVal = cacct;
		}else{
			logAcctVal = $.cookie('loginCacct');
		}
		if(logAcctVal != null && $.trim(logAcctVal) != ''){
			if(!isMobile(logAcctVal) && !Fai.isEmail(logAcctVal)){
				var logSacct = $('#log-sacct');
				var logSacctVal = $.cookie('loginSacct');
				var logUseSacct = $.cookie('loginUseSacct');
				if (sacct.length > 0) {
					logSacctVal = sacct;
				}
				if(logSacctVal) {
					logSacct.val(logSacctVal);
				}
				if(logUseSacct == 1) {
					$('#staff-login')[0].click();
				}
			}
			logAcct.val(logAcctVal);
		}
		//原来手机和邮箱存的cookie是loginAcct，这里过渡一下，过一段时间可以直接删掉
		else{
			logAcctVal = $.cookie('loginAcct');
			if(logAcctVal != null && $.trim(logAcctVal) != ''){
				logAcct.val(logAcctVal);
			}
		}
		$.cookie('loginAcct', null, {path:'/', domain:'fkw.com'});
		//////

		
			showCode(false);
		
		
		
		//IE(除了IE11)，底层的灰色提示标签会被触发focus，反而顶层输入框获取不到焦点，这里特殊处理转移焦点
		//因为IE给元素设置了绝对定位和z-index，若顶层元素是透明而底层元素非透明，还是会默认底层非透明的元素在上层（可以给底层输入框加背景颜色试试就知，加了不做以下的焦点转移也可以正常获取焦点）
//		if($.browser.msie){
		if(Fai.isIE()){
			$('.log-line .log-txt').click(function(){
				$(this).siblings('.log-input').focus();
			});
		}
		if ( Fai.isIE7() || Fai.isIE8()){	//IE7/8隐藏我们自定义的checkbox样式，会错位
			$('.goin .checkItemLabel').hide();
		}
		
		checkFocus( 'log-cacct' );
		checkFocus( 'log-sacct' );
		checkFocus( 'log-pwd' );
		checkFocus( 'log-valid' );
		
		setTimeout(autoFocus, 50);
	});
	
	//自动获取输入框焦点
	function autoFocus(){
		$('#log-cacct, #log-sacct, #log-pwd').filter(':visible').each(function(){
			var $this = $(this);
			if($this.val() == ''){
				$this.focus();
				checkFocus($this.attr('id'));
				return false;
			}
		});
	}
	
	function checkFocus( id ){
		var input = $('#' + id),
			val = input.val();
		if (id != "log-pwd"){
			val = $.trim(val);
		}
		$('#log-form').find('input.log-input').removeClass('input1');
		var txt = input.parent().children('.log-txt');
		$('.log-txt').removeClass("log-txt-hover");
		txt.addClass('log-txt-hover');
		$('.log-line').removeClass("log-line-hover");
		if ( id != "log-valid" ){
			input.parent().addClass("log-line-hover");
		}
		if( val == '' ){
			txt.show();
//			if ( Fai.isIE7() ){
//				input.css("background", "transparent");
//			}
		}else{
			txt.hide();
//			if ( Fai.isIE7() ){
//				input.css("background", "#fff");
//			}
		}
//		input.addClass('input1');
	}
	
	function showCode( needCode ){
		var loginMode = $(".checkLoginTab").attr("_loginmode");
		var login_line = $('#log-valid-line');
		var log_valid = $('#log-valid');
		var login_valid_img = $('#log-valid-img');
		if(loginMode == 'codeLogin'){
			login_line = $('#codeLogin-valid-line');
			log_valid = $('#codeLogin-valid');
			login_valid_img = $('#codeLogin-valid-img');
		}
		if( needCode ){
			login_line.show();
			log_valid.val('').focus();
			login_valid_img.attr( 'src', 'validateCode.jsp?'  + parseInt(Math.random() * 1000)+'&validateCodeRegType=3');
		}else{
			login_line.hide();
		}
	}
	
	function changeValidImg(){
		showCode( true );
	}

	function useSacct() {
		if ( $('#staff-login').prop("checked") ){
			$('#rowCacct .log-txt').text("凡科网帐号");
			$('#rowSacct').show();
		} else {
			$('#rowCacct .log-txt').text("凡科网帐号/邮箱/手机号码");
			$('#rowSacct').hide();
		}
		autoFocus();
	}
	
	
	function fixRelativeJump(){
		var _host = top.location.host;
		var map = {
			"iii.cc" : "//aaa.cn",
			"www.iii.cc" : "//www.aaa.cn",
			"icoc.cc" : "//faisco.cn",
			"www.icoc.cc" : "//www.faisco.cn"
		};
		return map[_host]||"";
	}
	
	function reg(){
		var reg_url = 'http://www.fkw.com/reg.html';
		top.location.href = reg_url;
	}
	
	function showMsg(msg){
		$('#error').text( msg ).show();
		if($.trim(msg) == '' || msg == null){
			$('#error').hide();
		}
	}
	
	function openPassword(){
		Portal.logDog(4000118, 4);
		var cacct = $('#log-cacct').val();
		window.open("//i.fkw.com/passwordNew.jsp?cacct=" + Fai.encodeUrl(cacct), "_blank");
	}

	function tipsClose(){
		Fai.removeIng2();
		Fai.removeBg();
		top.location.href = "/portal.jsp";
	}
	
	function bindWeChat(){
		var bindUrl = "https://i.fkw.com/bindAccount.jsp&state=827";
		Portal.logDog(4000027, 3);
		//window.open("https://open.weixin.qq.com/connect/qrconnect?appid=wx4d4e63dc215c39a6&scope=snsapi_login&redirect_uri=" + bindUrl, "_blank");
		window.location.href = "https://open.weixin.qq.com/connect/qrconnect?appid=wx4d4e63dc215c39a6&scope=snsapi_login&redirect_uri=" + bindUrl;
	}
	
	function bindQQAccount(){
		Portal.logDog(4000027, 0);
		//window.open("https://graph.qq.com/oauth/show?which=Login&display=pc&response_type=code&client_id=101375548&redirect_uri=http%3A%2F%2Fwww.faisco.cn%2FbindQQAccount.jsp&state=82&scope=get_user_info,get_info");
		window.location.href = "https://graph.qq.com/oauth/show?which=Login&display=pc&response_type=code&client_id=101375548&redirect_uri=http%3A%2F%2Fi.fkw.com%2FbindQQAccount.jsp&state=82&scope=get_user_info,get_info";
	}
	
	function checkLoginAcct(cacct){
		var checkThrough = true;
		var reg = /[\u4e00-\u9fa5]/g;
		if (reg.test(cacct)){
			checkThrough = false;
			return checkThrough;
		} else {
			reg = /^[a-zA-Z0-9]+$/g;
			if (!reg.test(cacct)){
				checkThrough = false;
				return checkThrough;
			} else {
				reg = /^[0-9]/;
				if (reg.test(cacct)){
					checkThrough = false;
					return checkThrough;
				} else {
					if(cacct.length < 4){
						checkThrough = false;
						return checkThrough;
					}
					if(cacct.length > 30){
						checkThrough = false;
						return checkThrough;
					}
				}
			}
		}
		return checkThrough;
	}
	
	var login = {
		initEvent:function() {
			$(".loginTab").click(function(){
				$(".loginTab").removeClass("checkLoginTab");
				$(this).addClass("checkLoginTab");
				$(".loginPanel").hide();
				$("."+ $(this).attr("_loginMode") +"Panel").show();
				showMsg("");
			})

			$('#showPwd').focus(function(){
				checkFocus( 'showPwd' );
			}).blur(function(){
				checkFocus( 'showPwd' );
			}).keydown(function(event){
				checkFocus( 'showPwd' );
				if( event.keyCode == 13 ){
					login.loginAcct();
				}
			}).keyup(function(){
				checkFocus( 'showPwd' );
				$("#log-pwd").val($("#showPwd").val());
			})

			$('#log-mobile').focus(function(){
				checkFocus( 'log-mobile' );
			}).blur(function(){
				checkFocus( 'log-mobile' );
			}).keydown(function(event){
				checkFocus( 'log-mobile' );
				if( event.keyCode == 13 ){
					login.loginAcct();
				}
			}).keyup(function(){
				checkFocus( 'log-mobile' );
			})

			$('#log-mobileCode').focus(function(){
				checkFocus( 'log-mobileCode' );
			}).blur(function(){
				checkFocus( 'log-mobileCode' );
			}).keydown(function(event){
				checkFocus( 'log-mobileCode' );
				if( event.keyCode == 13 ){
					login.loginAcct();
				}
			}).keyup(function(){
				checkFocus( 'log-mobileCode' );
			})
			
			$("#showPassword").click(function(){
				if($(this).attr("_show") == 'true'){
					$(this).attr("_show",false);
					$("#log-pwd").hide();
					$("#showPwd").show();
					$(this).addClass("log-hidePwd");
				}else{
					$(this).attr("_show",true);
					$("#log-pwd").show();
					$("#showPwd").hide();
					$(this).removeClass("log-hidePwd");
				}
			})

			$('.mobileCodeBtn').click(function(){
				if($(".mobileCodeBtn").attr("disabled") != "disabled" && login.checkMobile()){
					login.getCodeBtnClick();
				}
			});

			$('#log-cacct').focus(function(){
				checkFocus( 'log-cacct' );
			}).blur(function(){
				var acctVal = $(this).val().replace(/\s+/g, '');
				$(this).val(acctVal);
				checkFocus( 'log-cacct' );
			}).keydown(function(event){
				checkFocus( 'log-cacct' );
				if( event.keyCode == 13 ){
					var acctVal = $(this).val().replace(/\s+/g, '');
					$(this).val(acctVal);
					login.loginAcct();
				}
			}).keyup(function(){
				checkFocus( 'log-cacct' );
			})
		
			$('#log-sacct').focus(function(){
				checkFocus( 'log-sacct' );
			}).blur(function(){
				checkFocus( 'log-sacct' );
			}).keydown(function(event){
				checkFocus( 'log-sacct' );
				if( event.keyCode == 13 ){
					login.loginAcct();
				}
			}).keyup(function(){
				checkFocus( 'log-sacct' );
			})
			
			$('#log-pwd').focus(function(){
				checkFocus( 'log-pwd' );
			}).blur(function(){
				checkFocus( 'log-pwd' );
			}).keydown(function(event){
				checkFocus( 'log-pwd' );
				if( event.keyCode == 13 ){
					login.loginAcct();
				}
			}).keyup(function(){
				checkFocus( 'log-pwd' );
				$("#showPwd").val($("#log-pwd").val());
			})
			
			$('#log-valid').focus(function(){
				checkFocus( 'log-valid' );
			}).blur(function(){
				checkFocus( 'log-valid' );
			}).keydown(function(event){
				checkFocus( 'log-valid' );
				if( event.keyCode == 13 ){
					login.loginAcct();
				}
			}).keyup(function(){
				checkFocus( 'log-valid' );
			})
			
			$('#codeLogin-valid').focus(function(){
				checkFocus( 'codeLogin-valid' );
			}).blur(function(){
				checkFocus( 'codeLogin-valid' );
			}).keydown(function(event){
				checkFocus( 'codeLogin-valid' );
				if( event.keyCode == 13 ){
					login.loginAcct();
				}
			}).keyup(function(){
				checkFocus( 'codeLogin-valid' );
			})

			$('#log-valid-img, #log-refresh-btn, #codeLogin-valid-img, #codeLogin-refresh-btn').click( changeValidImg )
			$('#login-button').click(function(){
				login.loginAcct();
			});
			$('#login-button').hover(function(){
				$(this).addClass("loginBtn-hover");
			}, function(){
				$(this).removeClass("loginBtn-hover");
			});
			$('#reg-button, #reg-link').click( reg );
			$('#reg-button').hover(function(){
				$(this).addClass("regBtn-hover");
			}, function(){
				$(this).removeClass("regBtn-hover");
			});
			
			$("#log-mobile").keyup(function(){
				if(Fai.isMobile($.trim($("#log-mobile").val()))){
					$(".mobileCodeBtn").addClass("mobileCodeBtn_ok");
					$(".mobileCodeBtn").removeAttr("disabled");	
				}else{
					$(".mobileCodeBtn").removeClass("mobileCodeBtn_ok");	
					$(".mobileCodeBtn").attr("disabled", "disabled");
				}
			})

			$(".mobileCodeBtn").mouseover(function(){
				if(Fai.isMobile($.trim($("#log-mobile").val())) && $(this).attr("disabled") != "disabled"){
					$(".mobileCodeBtn").addClass("mobileCodeBtn_hover");	
				}else{
					$(".mobileCodeBtn").removeClass("mobileCodeBtn_hover");	
				}
			}).mouseout(function(){
				$(".mobileCodeBtn").removeClass("mobileCodeBtn_hover");	
			})
			
		},
		loginAcct:function(){
			var me = $('#login-button');
			if( me.hasClass('disabled') ){
				return;
			}
			
			cacct = $('#log-cacct').val();
			var sacct = $('#log-sacct').val();
			var pwd = $('#log-pwd').val();
			var valid = $('#log-valid').val();
			var autoLogin = $('#auto-login').prop('checked');
			var params = [];
			var staffLogin = $('#staff-login').prop("checked");
			var loginModel = $(".checkLoginTab").attr("_loginmode");
			if(loginModel == 'pwdLogin'){
				if( !cacct ){
					showMsg( '请输入凡科网帐号' );
					$('#log-cacct').focus();
					return;
				}
				if(staffLogin){
					if(!checkLoginAcct(cacct)){
						showMsg( '请输入正确的凡科网帐号' );
						$('#log-cacct').focus();
						return;
					}
				}
				if( staffLogin && !sacct ){
					showMsg( '请输入员工帐号' );
					$('#log-sacct').focus();
					return;
				}
				if( !pwd ){
					showMsg( '请输入密码' );
					$('#log-pwd').focus();
					return;
				}
				if( $('#log-valid-line').is(':visible') && !valid ){
					showMsg( '请输入验证码' )
					$('#log-valid').focus();
					return;
				}
			}else{
				var loginMoile = $.trim($("#log-mobile").val());
				var mobileCode = $.trim($('#log-mobileCode').val());
				if( !loginMoile ){
					showMsg( '请输入手机号码' );
					$('#log-mobile').focus();
					return;
				}
				if( !mobileCode ){
					showMsg( '请输入短信码' );
					$('#log-mobileCode').focus();
					return;
				}
			}
			params.push( 'cacct=' + Fai.encodeUrl( cacct ) );
			params.push( '&sacct=' + Fai.encodeUrl( sacct ) );
			params.push( '&pwd=' + $.md5( pwd ) );
			params.push( '&autoLogin=' + autoLogin );
			params.push( '&staffLogin=' + staffLogin );
			params.push( '&dogId=' + 0 );
			if(loginModel == 'pwdLogin'){
				params.push( '&cmd=loginCorpNew');
				params.push( '&validateCode=' + Fai.encodeUrl( valid ) );
			}else{
				params.push( '&cmd=loginCorpNewByCode');	
				params.push( '&loginMoile=' + Fai.encodeUrl( loginMoile ) );
				params.push( '&mobileCode=' + Fai.encodeUrl( mobileCode ) );
				params.push( '&validateCode=' + Fai.encodeUrl( $('#codeLogin-valid').val() ) );
			}
			me.addClass( 'disabled' ).html('正在登录...');
			showMsg('');
			$.ajax({
				type: 'post',
				url: '/ajax/login_h.jsp?dogSrc=3',
				data: params.join(''),
				error: function(){
					me.removeClass( 'disabled' ).html('登&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;录');
					showMsg( '服务繁忙，请稍候重试' );
				},
				success: function(result){
					var data = $.parseJSON( result );
					if( data ){
						if( data.success ){
							// ## START success ##
							// 写cookie：登录后复制网站
							var cloneAid = 0;
							var templateId = -1;
							var cookieDomain = 'fkw.com';
							var fromUrl = '';
							var jump = 0;
							var days = data.days;
							//是否是内部帐号
							var isInternalCorp = data.isInternalCorp;
							// 写cookie：进网站后跳转
							var jumpSite = false;
							if( cloneAid != 0 ){
								$.cookie( '_regCloneAid', cloneAid, {domain: cookieDomain} );
								if( templateId != 0 ){
									$.cookie( '_regTemplateId', templateId, {domain: cookieDomain} );
								}
								jumpSite = true;
							}
							var jumpUrl = "";
							if( jump != 0 ){
								jumpUrl = '/jump.jsp?t=' + jump;
							}else if(data.callBack){
								jumpUrl = data.callBackUrl;
							} else if (jumpSite) {
								jumpUrl = data.siteUrl;
							} else {
								if (fromUrl) {
									jumpUrl = fromUrl;
								} else {
									//jumpUrl = fixRelativeJump() + '/portal.jsp';
									jumpUrl = '/portal.jsp';
								}
							}
							
							//用户注册7天后在所有登录入口每次登陆均判断密码是否符合安全强度要求
							//（密码由6-20个字符组成，须同时包含字母、数字和特殊符号其中两种组合），如果不符合
							if(data.aid == 1 && (/^(fanke)/.test(pwd) || /^(faisco)/.test(pwd))){
								jumpUrl = '/portal.jsp#appId=setPwd';
								$.cookie( 'faiIng', '0', { expires: 1, path: '/' } );	
							}else if(days > 7){
								var modes = 0;
								//数字
								if ( /\d/.test(pwd) ) {
									modes++;
								}
								//字母
								if ( (/[a-z]/.test(pwd)) || (/[A-Z]/.test(pwd)) ) {
									modes++;
								}
								//特殊符号
								if ( /\W/.test(pwd) || /[_]/.test(pwd) ) {
									modes++;
								}
								if(modes < 2){
									//内部帐号
									if(isInternalCorp == 'true'){
										jumpUrl = '/portal.jsp#appId=setPwd';
										$.cookie( 'faiIng', '0', { expires: 1, path: '/' } );	
									}else{
										$.cookie( 'faiIng', '1', { expires: 1, path: '/' } );
									}
								}else{
									$.cookie( 'faiIng', '0', { expires: 1, path: '/' } );	
								}						
								
							}else{
								$.cookie( 'faiIng', '0', { expires: 1, path: '/' } );
							}
							$.cookie("orderTipsCookie","true",{expires: 7 ,path:'/' });
							$.cookie("couponTipsCookie","true",{expires: 7 ,path:'/' });
							$.cookie("serviceTipsCookie","true",{expires: 7 ,path:'/' });
							$.cookie('_hasClosePlatinumAd_',"false",{expires: 1, path: '/',domain:'fkw.com'});//互动portal index上的小广告窗口
							$.cookie('_hasClosePlatinum_',"false",{expires: 1, path: '/',domain:'fkw.com'});//互动portal myactive上的banner
							$.cookie("_hasCloseFlyerAd_","false",{expires: 1, path: '/',domain:'fkw.com'});//hdportal 引导开通传单
							$.cookie("_hasCloseHdGG_","false",{expires: 1, path: '/',domain:'fkw.com'});//flyer 引导开通传单
							$.cookie("faiscoAd",true,{expires: 1, path: '/',domain:'fkw.com'});//site左下角广告是否显示
							$.cookie("_whereToPortal_","login",{expires: 1, path: '/',domain:'fkw.com'});//记录何处到商务平台
							$.cookie('hasShowBeianWindow', null, {path:'/service'});	//清除siteRecord.jsp下面的备案提示弹窗cookie
							$.cookie('hasShowDomainBeianWindow', null);
							$.cookie('hasShowBeianSmsTips', null, {path:'/service'});
							
							//往工单系统存储cookie用于处理跨域请求
							top.location.href = jumpUrl;
							// ## END success ##
						}else{
							// ## START error ##
							if( data.active ){
								top.location.href = '//i.fkw.com/reAct.jsp?cacct=' + cacct;
								return;
							}
							if( data.msg ){
								msg = data.msg;
							}else{
								msg = '系统错误';
							}
							if(typeof(data.verify) != "undefined"){
								$('#error').text("").show();
								$('#error').html('手机未验证，请<a href="http://www.fkw.com/reg.html" target="_blank" style="color:#3497db">注册</a>');
							}else{
								showMsg( msg );
							}
							showCode( data.needValidateCode );
							me.removeClass( 'disabled' ).html('登&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;录');
							// ## END error ##
						}
					}else{
						showMsg( '连接超时，请重试' );
						me.removeClass( 'disabled' ).html('登&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;录');
					}
				}
			})
		},
		checkMobile:function(){
			var $mobile = $('#log-mobile'),
				msg = '';
			var mobile = $.trim($mobile.val());
			if(!mobile){
				msg = '请输入手机号码';
			}else if(!Fai.isMobile(mobile)){
				msg = '请输入正确的11位手机号码';
			}
			
			if(msg){
				showMsg( msg);
				return false;
			}else{
				return true;
			}
		},
		getCodeBtnClick:function(){
			var $btn = $('.mobileCodeBtn');
			var timeCtrl = $btn[0]._timeCtrl;
			if(!timeCtrl){
				timeCtrl = {
					timer: null,
					second: 60,
					clickCnt: 0
				};
				$btn[0]._timeCtrl = timeCtrl;
			}
			if(timeCtrl.timer){
				return false;
			}
			if($(".mobileCodeBtn").attr("disabled") == "disabled"){
				return false;
			}
			$.ajax({
				type:"post",
				url:"/ajax/login_h.jsp?cmd=checkMobileVerify&mobile="+$.trim($("#log-mobile").val()),
				success: function(result){
					var data = $.parseJSON( result );
					if(typeof(data.verify) != "undefined"){
						$btn.attr('disabled', 'disabled');
						$btn.removeClass('mobileCodeBtn_ok');
						$('#error').text("").show();
						$('#error').html('手机未验证，请<a href="http://www.fkw.com/reg.html" target="_blank" style="color:#3497db">注册</a>');
					}else{
						if(true && false){
							login.mImgVerify.show(false);
						}else{
							$btn.attr('disabled', 'disabled');
							login.mImgVerify.sendValidateCode(null, null, function(msg){
								showMsg( msg);
								$(".mobileCodeBtn").removeClass('mobileCodeBtn_ok');
								//$btn.removeAttr('disabled');
							});
						}	
					}	
				}
			});


		},
		 /* 图形验证码 */
		mImgVerify : {
			templateId : '#t-imgVerify',
			$dom : null,
			validateCodeRegType: 3,	//默认为建站 =====(用于判断显验证码的类型)=====
			show: function(isMailAcct_mobile){
				showMsg('');
				$($(this.templateId).html()).appendTo($('body'));
				this.$dom = $(".m-imgVerify");
				login.mImgVerify.refresh();
				Fai.bg();
				$(".m-imgVerify").find('.close').click(function(){
					login.mImgVerify.close();
				});
				$(".m-imgVerify").find('.codeImg, .refreshBtn').click(login.mImgVerify.refresh);
				$(".m-imgVerify").find('.confirmBtn').click(function(){
					var $this = $(this);
					if(login.mImgVerify.checkCode()){
						var code = $.trim($(".m-imgVerify").find('.codeVal').val());
						$this.attr('disabled', 'disabled');
						login.mImgVerify.sendValidateCode(code, null, function(){
							$this.removeAttr('disabled');
						});
					}
				});
				this.$dom.find('.codeVal').keydown(function(event){
					if(event.keyCode == 13 || event.which == 13){
				    $(".m-imgVerify").find('.confirmBtn').click();
				    //IE9需要阻止enter键触发“获取验证码”按钮的点击，避免再次弹窗。（这里转移了focus都没用，很奇葩）
				    event.preventDefault();
				}
				}).focus();
				//IE9需要异步触发focus()
			},
			close: function(){
				$(".m-imgVerify").remove();
				Fai.removeBg();
			},
			setMsg: function(msg){
				var $msg = $(".m-imgVerify").find('.msg').html(msg);
				if(msg){
					$msg.show();
				}else{
					$msg.hide();
				}
			},
			refresh:function(){
				$(".m-imgVerify").find('.codeImg').attr('src', 'validateCode.jsp?' + parseInt(Math.random() * 1000) + '&validateCodeRegType=3');
				$(".m-imgVerify").find('.codeVal').focus();
			},
			checkCode:function(){
				var code = $.trim($(".m-imgVerify").find('.codeVal').val());
				var msg = null;
				if(!code){
					msg = '请输入图片验证码';
				}else if(code.length != 4){
					msg = '请输入正确的图片验证码';
				}
				if(msg){
					login.mImgVerify.setMsg(msg);
					$(".m-imgVerify").find('.codeVal').focus();
					return false;
				}else{
					return true;
				}
			},
			sendValidateCode:function( imgCode, callbackSuc, callbackErr){
				//isMailAcct_mobile : false 默认， true 邮箱注册用户手机号验证
				var $btn = $('.mobileCodeBtn');
				var timeCtrl = $btn[0]._timeCtrl;
				var acctType_s = (Fai.isMobile(cacct) ? 1 : 2);
				var cacct =  $.trim($("#log-mobile").val());
				var $codeInput = $('#log-mobileCode');
				if(!timeCtrl || timeCtrl.timer){
					return false;
				}
				var validateCode = imgCode;
				if(validateCode){
					var encrypt = new JSEncrypt();
					encrypt.setPublicKey(faiEncrypt_key);
					validateCode = encrypt.encrypt(validateCode);
				}
				var isMailAcct_mobile = false;
				var cacctCode = '';
				var encrypt1 = new JSEncrypt();
				
				encrypt1 = new JSEncrypt1();
				
				encrypt1.setPublicKey(faiEncrypt_key);
				cacctCode = encrypt1.encrypt(cacct);
				$.ajax({
					type:"post",
					url:"/ajax/reg_h.jsp?cmd=sendValidateCode",
					data: {
						cacct: cacct,
						acctType: acctType_s,
						isResend: timeCtrl.clickCnt > 0,
						validateCode: validateCode || '',
						isNewSms: true,
						cacctCode: cacctCode,
						isMailAcct: isMailAcct_mobile
					},
					error: function(){
						if(typeof callbackErr == 'function'){
						callbackErr('系统繁忙');
					}
					},
					success: function(result){
					    var result = jQuery.parseJSON(result);
					    if(result.success){
						//operatePopupVc('false');
						$btn.attr('disabled', 'disabled');
						$btn.removeClass('mobileCodeBtn_ok');
						clearInterval(timeCtrl.timer);
						timeCtrl.clickCnt++;
						timeCtrl.second = 60;
						timeCtrl.timer = setInterval(function(){
							if(timeCtrl.second > 0){
								$btn.html('已发送(' + timeCtrl.second + ')');
								timeCtrl.second--;
							}else{
								$btn.html('重新获取').removeAttr('disabled');
								$btn.addClass('mobileCodeBtn_ok');
								clearInterval(timeCtrl.timer);
								timeCtrl.timer = null;
							}
						}, 1000);
						
						$btn.closest('.u-input').find('.msg').removeClass('z-err').show();
						var cacctStr = cacct;
						if(validateCode){
							login.mImgVerify.close();
						}
						$codeInput.focus();
						if(typeof callbackSuc == 'function'){
							callbackSuc();
						}
						if($("#codeLogin-valid-line").css("display") == "block"){
							$("#codeLogin-refresh-btn").click();
						}
					    }else{
						var msg = result.msg;
						if(validateCode){
							if(result.rt == -401){
								msg = '图片验证码错误，请重新输入';
							}
							login.mImgVerify.setMsg(msg);
							login.mImgVerify.refresh();
						}else{
							if(result.rt == -401){
								login.mImgVerify.show(isMailAcct_mobile);
							}else{
								$btn.closest('.u-input').find('.msg').addClass('z-err').show();
							}
						}
						if(typeof callbackErr == 'function'){
							callbackErr(msg);
						}
					    }
					}
				    });
						
			 }
		}
	}
	
	;(function($, undefined){
		//如果是mjzpro10过来，用cookie记录一下。用于portal.jsp登录后打log by jser
		if(false){
			$.cookie("isFromMJZPro10", true);
		}
	}(jQuery));
</script>
</body>
</html> 

